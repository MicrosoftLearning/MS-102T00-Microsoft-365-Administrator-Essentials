# Learning Path 6 - Lab 6 - Exercise 7 - Validate alert notifications and simulated attacks

This lab included three exercises in which you configured Microsoft 365 to create alert notifications (Exercises 2 through 4). It also included two exercises that created simulated attacks (Exercises 5 and 6). All five exercises generated an email notification, which have to be validated to ensure the alerts and simulated attacks are working properly. 

For each of these exercises, it could take up to 15 minutes for the system to create its corresponding email. Rather than having you wait up to 15 minutes to receive the email at the end of each those exercises, (which is 75 total minutes of wait time; 5 exercises x 15 minutes each), you were instructed to proceed to the next exercise and validate the emails in this final Lab 6 exercise. By this time, hopefully all emails for these five exercises have been generated and you will not have to endure any wait time.

**Note:** The process of generating the email that's associated with each alert and simulated attack should have started when you completed its corresponding exercise. Hopefully, enough time has elapsed from when you finished the prior exercises until you reached their respective validation task in this exercise so that the email is already generated and you don't have to wait for it. If necessary, when you're looking at the respective user's Inbox in each task below, periodically select the **Refresh** icon to the left of the URL address if you're still waiting for a particular email.    


### Task 1 – Validate the Mailbox Permission Alert

In Lab 6, Exercise 2, you configured an alert designed to notify Lynne Robbins when FullAccess permissions are granted to any mailbox within Adatum. You tested this alert by changing the FullAccess permission on Alex Wilber’s mailbox by granting Joni Sherman FullAccess to his mailbox. This activity should have triggered the alert policy that you created, which should have sent an alert notification email to Lynne Robbins’ mailbox. In this task, you will log into LON-CL2 as Lynne Robbins and verify whether she received this email. 

1. ‎Switch to **LON-CL2**. On **LON-CL2**, you should be signed into the machine as the local **Admin** (lon-cl2\admin) account. Select the **Microsoft Edge** icon in the taskbar, maximize the window (if necessary), and then enter the following URL in the address bar: **https://outlook.office365.com**

2. In the **Pick an account** window, if Lynne Robbins account (**LynneR@xxxxxZZZZZZ.onmicrosoft.com**) appears in the user list, then select it now; otherwise, select **Use another account** and sign in as **LynneR@xxxxxZZZZZZ.onmicrosoft.com** (where xxxxxZZZZZZ is the tenant prefix provided by your lab hosting provider). In the **Enter password** window, enter the New User Password** that you previously assigned to Lynne's account and select **Sign in**. 

3. In Lynne's Outlook mailbox, you should hopefully see two emails that arrived today that were automatically sent by the Alerts notification system (**Office365Alerts@microsoft.com**). The first of these two emails should be the one that was generated by the mailbox permission alert that you created in Exercise 2. The purpose of the email is to inform Lynne that Holly Dickson has made a Mailbox permission change. <br/>

4. The email contains a **View alert details** button that you could select to display details on the alert that was generated. As of August, 2025, this button no longer works due to a configuration change in the Defender XDR portal.

5. In your Edge browser, open a new browser tab, navigate to **https://security.microsoft.com**.

6. The **Microsoft Defender** portal displays, from the left navigation bar, expand **Incidents & alerts** and select **Email and collaboration alerts**. 

7. In the **View alerts** page that opens, select the alert named **Mailbox permission change** (select the name, not the checkbox).

8. Scroll down through the Mailbox permission change pane and review all the information for this activity. When you are done, select Close to close the pane.

9. In your Edge browser, close the **View Alerts - Microsoft Defender** tab. Leave Lynne's **Outlook** tab open, as you will use that in the next task.

10. Leave your Edge browswer opon on the LON-CL2 VM. Do not close Lynne's mailbox as you will access it again in the next task.

You have just successfully tested a mailbox permission alert that sent an alarm message on granting FullAccess to a user mailbox.


### Task 2 – Validate the  SharePoint Permissions Alert

In Lab 6, Exercise 3, you configured an alert designed to notify Lynne Robbins when a user is added as a site collection administrator for a site collection. To test this alert, you added Alex Wilber as a site collection admin to the global SharePoint Communication site. This activity should have triggered the alert policy that you created, which should have sent an alert notification email to Lynne Robbins’ mailbox. In this task, you will validate whether Lynne received this alert notification email.

1. On **LON-CL2**, you should still be logged into **Outlook on the web** as **Lynne Robbins** from the prior task. 

2. In Lynne's Inbox, you should hopefully see two emails that arrived today that were automatically sent by the Alerts notification system (**Office365Alerts@microsoft.com**). The second of these two emails should be the one that was generated by the SharePoint Permissions alert that you created in Exercise 3. The email contains a **View alert details** button that you will select to display details on the alert that was generated. When testing this lab, this button did not seem to work if you opened the email. However, when you viewed the contents of the email in preview pane in Outlook, then the button worked. So select the email in the Inbox, and then in the preview pane that displays the body of the email, select the **View alert details** button. Selecting this button opens the **Microsoft Defender** portal in a new tab.

3. The **Microsoft Defender** portal displays the **Alerts** window, and it automatically opens the **Add user as a site collection administrator** pane for this alert activity that triggered the email. Scroll down through this pane and review all the information for this alert activity. When you are done, select **Close** to close the pane.

4. Leave your LON-CL2 VM open as you will access Lynne's mailbox in a later task in this exercise.

You have now successfully tested the SharePoint alert to monitor site collection admin permissions on SharePoint sites. 


### Task 3 – Validate the default eDiscovery Alert

In Lab 6, Exercise 4, you created a default Microsoft 365 alert policy that notifies all tenant administrators, such as Holly Dickson, whenever an eDiscovery search has been created or exported. You then tested this alert by creating an eDiscovery search, which should have triggered the alert policy to send an alert notification email to all Tenant Admins. Holly is a Global administrator. By default, Global admins are members of the Tenant Admin group. As such, Holly should have received the email notification generated by this alert. In this task, you will validate whether Holly received this email.

1. Switch to **LON-CL1**. 

2. On **LON-CL1**, in your Edge browser, you should still be logged into Microsoft 365 as **Holly Dickson**. 

3. In your **Microsoft Edge** browser, if you have a tab open that contains Holly's Outlook mailbox, then select it now. Otherwise, select the **Home | Microsoft 365** tab, and then on the **Welcome to Microsoft 365** page, select **Outlook** in the column of apps on the left-side of the screen. 

4. In Holly's Outlook mailbox, check her Inbox for an **Informational-severity alert: eDiscovery search started or exported** email that was automatically sent by the default eDiscovery alert that you enabled in Exercise 4. The purpose of this message is to inform Holly that an eDiscovery search was created or exported. The email contains a **View alert details** button that you will select to display details on the alert that was generated. When testing this lab, this button did not seem to work if you opened the email. However, when you viewed the contents of the email in preview pane in Outlook, then the button worked. So select the email in the Inbox, and then in the preview pane that displays the body of the email, select the **View alert details** button. Selecting this button opens the **Microsoft Defender** portal in a new tab.

5. The **Microsoft Defender** portal displays the **Alerts** window, and it automatically opens the **eDiscovery search started or exported** pane for this alert activity that triggered the email. Scroll down through this pane and review all the information for this alert activity. When you are done, select **Close** to close the pane.

6. While this exercise was about validating the alert that was generatred when running an eDiscovery search, you can perform the following steps if you're interested in viewing the statistics that were generated from this search:

	- Select the **Home - Microsoft 365 admin center** tab in your Edge browser. In the **Microsoft 365 admin center**, select **Compliance** in the navigation pane to open the Microsoft Purview portal.
	
	- In the **Microsoft Purview** portal, select **Solutions**, and then select **eDiscovery** in the navigation pane.

	- Under the **Classic eDiscovery** section, select **Content Search**.
	
	- On the **Content search** page, the **Search** tab is displayed by default. In the list of searches, select **Confidential search**.
	
	- In the **Confidential search** pane that appears, the **Summary** tab is displayed by default. Review the information for this search, and then select the **Search statistics** tab. Select each of the three sections (Search content, Condition report, and Top locations) to expand them, and then review the information that was compiled for each section. Select the **Close** button to close this pane when you're finished. 

7. In your browser, leave the Outlook tab (**Mail - Holly Dickson - Outlook**) open on the LON-CL1 VM as you will use it in a later task. Leave all your other browser tabs open as well.

You have now successfully tested the Microsoft 365 eDiscovery system alert that monitors the creation of an eDiscovery search or the export of data from a completed search.


### Task 4: Validate the simulated Spear Phishing attack

In Lab 6, Exercise 5, you configured and launched a spear phishing attack, which should have sent a very intriguing, real-world looking email to all Adatum users. In this task, you will verify that Holly received this email, you'll have her respond to the email to see what happens when a user falls for a spear phishing attack, and you'll review the results associated with the simulated attack.

1. On **LON-CL1**, in your Edge browser, you should still be logged into Microsoft 365 as **Holly Dickson**. 

2. In Holly's Outlook Inbox, you should see the spear phishing email that was sent by the Attack Simulator. The subject and text of the email will vary depending on the payload you selected when setting up the spear phishing simulation in the earlier exercise. For example, the subject of the message may say something like **2 Failed messages to you**. Do not open the email, since like the previous alert emails, the button inserted in the email doesn't appear to work when you open the email. Instead, simply select the email to view it in the Outlook preview pane. 

3. In the email, note the message that appears. Again, the message may vary depending on the payload you selected when setting up the spear phishing simulation. For example, it may say something like: **Our server has detected some errors delivering 2 new message to your Inbox due to the synchronization delay. Click on View Returned Messages below to retrieve these messages.** Regardless of the exact message, keep in mind that its purpose is to trick the user into thinking this is a legitimate email, when in fact, it's a spear phishing attack. 

4. To test this simulated attack, select the **View Returned Messages** button. Note what happens - a legitimate looking **Sign in** box appears, requesting you to sign in. This is how an attacker could capture your username and password credentials. Since this is just a simulated attack, go ahead and enter **Holly@xxxxZZZZZZ.onmicrosoft.com**, select **Next**, and then in the **Enter password** box, enter the New Administrative Password** that you assigned to Holly's account and select **Sign in**.   <br/>

	Note what happens when you finish signing in. The simulated spear phishing attack displays a web page that indicates you were just phished by your security team. It also provides tips on how to identify the phishing message. Review the contents of this site, which uses the landing page template that you selected when setting up the attack simulation.  <br/>

	At the bottom of this page, you have the option to navigate to some training on how to avoid being phished in the future. Select the **Go to training** button. This opens a new tab in your browser that displays training information on Web Phishing. 

5. In your Edge browser, select the tab containing Holly's Outlook mailbox. Note the additional email that arrived in her Inbox from the **Security and Compliance Team**. When you configured the simulated spear phishing attack, one of the options you selected was to send a weekly Microsoft default training reminder notification to users.

6. In your Edge browser, if you have the **Attack simulation training** tab open, then select it now. Otherwise, select the tab containing your Microsoft Defender portal, and in the navigation pane, select **Attack simulation training**.

7.  On the **Attack simulation training** page, select the **PhishingTest1** simulation to view the diagnostic results that were captured for this simulation.

8. A **PhishingTest1** page should appear. Review all the information collected for this simulated attack. When you're finished, select the **X** in the top corner of the window to close it. 

9. Leave your browser open in LON-CL1 and do not close any of the tabs.
    

### Task 5: Validate the simulated Drive-by URL attack

In Lab 6, Exercise 6, you configured and launched a simulated Drive-by URL attack. In this task, you will review the results of the simulated Drive-by URL attack that you launched. When you configured this attack, you selected Lynne Robbins as the target of the attack; therefore, Lynne should have received the email that you configured in the Attack simulation training. You'll verify that Lynne received this email, you'll have her respond to the email to see what happens when a user falls for a Drive-by URL attack, and you'll review the results associated with the simulated attack.

1. Switch to **LON-CL2**. On LON-CL2, in the Edge browser, you should have a tab open containing Lynne Robbins' Outlook mailbox from the earlier alert notification tasks. 

2. In Lynne's Outlook Inbox, you should see the email that was sent by the Attack Simulator that's from **Klemen Sic** (klemens@tailspintoys.com). The subject of the email is **Free toy giveaway promotion from Tailspin Toys**. Do not open the email, since like the previous alert emails, the link inserted in the email doesn't appear to work when you open the email. Instead, simply select the email to view it in the Outlook preview pane. 

3. In the email, you should recognize the message that appears, which you configured when you created this attack simulation in Exercise 6. The purpose of this message is to trick the user into thinking this is a legitimate email, when in fact, it's a Drive-by URL attack. 

4. To test this simulated attack, select the **Free25thAnniversaryGift@tailspintoys.com** link. Note what happens - the simulated drive-by URL attack displays a web page that indicates you were just phished by your IT team. It instructs you that legitimate sounding sites such as **https://www.prizegives.com**, which was the site linked to the **Free25thAnniversaryGift@tailspintoys.com** link, have been compromised by malicious attackers. So even though you may see the underlying www.prizegives.com site and you think it's legitimate, it's in fact been compromised. This site also shows you a list of information that could have been captured had this been a real attack. 

5. In your Edge browser, select the tab containing Lynne's Outlook mailbox. Note the additional email that arrived in her Inbox from the **Security and Compliance Team**. This is a legitimate email that was sent to Lynne. When you configured the simulated spear phishing attack, one of the options you selected was to send a weekly Microsoft default training reminder notification.

6. In the **Outlook** tab in your Edge browser, select the picture of Lynne Robbins in the upper-right corner of the window. In Lynne's profile window that appears, select **Sign out**.

7. Once Lynne is signed out, close the Edge browser.

8. Switch back to **LON-CL1**.

9. On LON-CL1, in your browser session where you are logged in as Holly Dickson, you should still be on the **Attack simulation training** page. Select the **Custom payload** simulation to view the diagnostic results that were captured for this simulation.

10. A **Custom payload** page should appear. Review all the information collected for this simulated attack. When you're finished, select the **X** in the top corner of the window to close it. 

11. Leave your browser open in LON-CL1. Close all tabs EXCEPT for the **Home | Microsoft 365** and **Home | Microsoft 365 admin center** tabs. 


### Task 6: Disable Multifactor Authentication for the attack simulation admin

To use Microsoft's Attack simulation training to simulate phishing attacks, Holly enabled Multifactor Authentication (MFA) for her user account. Now that she has completed the Attack simulation training tests, she wants to disable MFA for her account so that she doesn't have to deal with MFA for the remainder of the pilot project.

1. On LON-CL1, in your Edge browser, you should still be logged into Microsoft 365 as **Holly Dickson**. Select the **Home | Microsoft 365 admin center** tab. 

2. On the **Microsoft 365 admin center**, in the left-hand navigation pane, select **Users** and then select **Active users**.

3. In the **Active users** window, on the menu bar at the top of the user list, select **Multi-factor authentication**.

4. On the **multi-factor authentication** page that appears, the **users** tab at the top of the page is displayed by default. Note the MFA status for all existing user accounts is **Disabled**, except for Holly Dickson, whose status is **Enforced**.  <br/>

	**Note:** When you enabled MFA for Holly back in Exercise 5, her status was changed from **Disabled** to **Enabled**. However, the first time you signed in as Holly after enabling MFA (right after enabling MFA in Exercise 5), the system automatically changed her MFA status from **Enabled** to **Enforced**.  <br/>

	Select the check box for **Holly Dickson**, and in Holly's properties pane that appears on the right, select **Disable**. 

6. On the **Disable multi-factor authentication?** dialog box, select **yes**. When the **Updates successful** dialog box appears, select **close**. 

7. In the **multi-factor authentication** window, verify Holly's MFA Status has changed to **Disabled**. 

8. You must now sign out of Microsoft 365 as Holly and then sign back in as Holly (without MFA). To do so, perform the following steps: <br/>

	- Select Holly's account icon (HD in a circle) at the top-right of the screen and in Holly's profile window, select **Sign out**.
	- Once you're signed out, close your Edge browser. Doing so will clear your cache.
	- Open a new Edge browser session.
	- Enter the **https://www.microsoft365.com** URL to open the Microsoft 365 home page.
	- In the **Pick an account** window, select Holly's account.
	- In the **Enter password** window, enter the new Administrative Password that you assigned to Holly's account and select **Sign in**.
	- From the **Microsoft 365 Home** page, select the **Admin** icon to navigate to the **Microsoft 365 admin center**.
	
	You are now ready to proceed to the next lab exercise.

# End of Lab 6
